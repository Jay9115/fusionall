{"ast":null,"code":"var _jsxFileName = \"D:\\\\SGP\\\\fusionall\\\\src\\\\components\\\\Bloglist.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { auth } from './firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BlogList() {\n  _s();\n  const [blogs, setBlogs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [expandedBlogId, setExpandedBlogId] = useState(null);\n  const [currentUserId, setCurrentUserId] = useState(null);\n  useEffect(() => {\n    const fetchBlogs = async () => {\n      setLoading(true);\n      try {\n        const res = await fetch('http://localhost:5000/api/blogs');\n        const data = await res.json();\n        setBlogs(data);\n      } catch (error) {\n        setBlogs([]);\n      }\n      setLoading(false);\n    };\n    const user = auth.currentUser;\n    if (user) setCurrentUserId(user.uid);\n    fetchBlogs();\n  }, []);\n  const handleToggle = blogId => {\n    setExpandedBlogId(prevId => prevId === blogId ? null : blogId);\n  };\n  const handleDelete = async (blogId, blogPath) => {\n    try {\n      const response = await fetch('http://localhost:5000/api/blogs', {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          blogPath,\n          authorId: currentUserId,\n          blogId\n        })\n      });\n      if (response.ok) {\n        setBlogs(blogs.filter(blog => blog.id !== blogId));\n        alert('Blog deleted successfully.');\n      } else {\n        alert('Failed to delete the blog. Please try again.');\n      }\n    } catch (error) {\n      alert('Failed to delete the blog. Please try again.');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"blog-list\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"All Blogs\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading blogs...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }, this) : blogs.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No blogs posted yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }, this) : blogs.map(blog => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"blog-container\",\n      style: {\n        width: '100%',\n        border: '1px solid #ddd',\n        borderRadius: '5px',\n        padding: '10px',\n        margin: '10px 0',\n        boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\n        cursor: 'pointer'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          margin: '0 0 5px 0',\n          color: expandedBlogId === blog.id ? '#333' : '#007BFF',\n          textDecoration: expandedBlogId === blog.id ? 'none' : 'underline',\n          fontSize: '1.2em'\n        },\n        onClick: () => handleToggle(blog.id),\n        children: blog.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }, this), expandedBlogId === blog.id && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"blog-author\",\n          style: {\n            margin: '5px 0',\n            fontWeight: 'bold',\n            fontSize: '0.8em'\n          },\n          children: [\"Author: \", blog.authorName || 'Unknown']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: blog.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"blog-date\",\n          style: {\n            fontSize: '0.8em',\n            color: '#555',\n            marginTop: '10px'\n          },\n          children: [\"Posted on: \", blog.date ? new Date(blog.date.seconds ? blog.date.seconds * 1000 : blog.date).toLocaleString() : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 33\n        }, this), currentUserId === blog.authorId && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            e.stopPropagation();\n            handleDelete(blog.id, blog.path);\n          },\n          style: {\n            marginTop: '10px',\n            padding: '5px 10px',\n            backgroundColor: '#ff4d4d',\n            color: 'white',\n            border: 'none',\n            borderRadius: '5px',\n            cursor: 'pointer'\n          },\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 29\n      }, this)]\n    }, blog.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}\n_s(BlogList, \"Hgh2Yn86YahOcmDMSfNPmkD22mw=\");\n_c = BlogList;\nexport default BlogList;\nvar _c;\n$RefreshReg$(_c, \"BlogList\");","map":{"version":3,"names":["React","useEffect","useState","auth","jsxDEV","_jsxDEV","BlogList","_s","blogs","setBlogs","loading","setLoading","expandedBlogId","setExpandedBlogId","currentUserId","setCurrentUserId","fetchBlogs","res","fetch","data","json","error","user","currentUser","uid","handleToggle","blogId","prevId","handleDelete","blogPath","response","method","headers","body","JSON","stringify","authorId","ok","filter","blog","id","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","style","width","border","borderRadius","padding","margin","boxShadow","cursor","color","textDecoration","fontSize","onClick","title","fontWeight","authorName","content","marginTop","date","Date","seconds","toLocaleString","e","stopPropagation","path","backgroundColor","_c","$RefreshReg$"],"sources":["D:/SGP/fusionall/src/components/Bloglist.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { auth } from './firebase';\r\n\r\n\r\nfunction BlogList() {\r\n    const [blogs, setBlogs] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [expandedBlogId, setExpandedBlogId] = useState(null);\r\n    const [currentUserId, setCurrentUserId] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchBlogs = async () => {\r\n            setLoading(true);\r\n            try {\r\n                const res = await fetch('http://localhost:5000/api/blogs');\r\n                const data = await res.json();\r\n                setBlogs(data);\r\n            } catch (error) {\r\n                setBlogs([]);\r\n            }\r\n            setLoading(false);\r\n        };\r\n\r\n        const user = auth.currentUser;\r\n        if (user) setCurrentUserId(user.uid);\r\n\r\n        fetchBlogs();\r\n    }, []);\r\n\r\n    const handleToggle = (blogId) => {\r\n        setExpandedBlogId((prevId) => (prevId === blogId ? null : blogId));\r\n    };\r\n\r\n    const handleDelete = async (blogId, blogPath) => {\r\n        try {\r\n            const response = await fetch('http://localhost:5000/api/blogs', {\r\n                method: 'DELETE',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    blogPath,\r\n                    authorId: currentUserId,\r\n                    blogId\r\n                }),\r\n            });\r\n            if (response.ok) {\r\n                setBlogs(blogs.filter(blog => blog.id !== blogId));\r\n                alert('Blog deleted successfully.');\r\n            } else {\r\n                alert('Failed to delete the blog. Please try again.');\r\n            }\r\n        } catch (error) {\r\n            alert('Failed to delete the blog. Please try again.');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"blog-list\">\r\n            <h2>All Blogs</h2>\r\n            \r\n            {loading ? (\r\n                <p>Loading blogs...</p>\r\n            ) : blogs.length === 0 ? (\r\n                <p>No blogs posted yet.</p>\r\n            ) : (\r\n                blogs.map((blog) => (\r\n                    <div\r\n                        key={blog.id}\r\n                        className=\"blog-container\"\r\n                        style={{\r\n                            width: '100%',\r\n                            border: '1px solid #ddd',\r\n                            borderRadius: '5px',\r\n                            padding: '10px',\r\n                            margin: '10px 0',\r\n                            boxShadow: '0 2px 4px rgba(0, 0, 0, 0.1)',\r\n                            cursor: 'pointer',\r\n                        }}\r\n                    >\r\n                        <h3\r\n                            style={{\r\n                                margin: '0 0 5px 0',\r\n                                color: expandedBlogId === blog.id ? '#333' : '#007BFF',\r\n                                textDecoration: expandedBlogId === blog.id ? 'none' : 'underline',\r\n                                fontSize: '1.2em',\r\n                            }}\r\n                            onClick={() => handleToggle(blog.id)}\r\n                        >\r\n                            {blog.title}\r\n                        </h3>\r\n                        {expandedBlogId === blog.id && (\r\n                            <div>\r\n                                <p\r\n                                    className=\"blog-author\"\r\n                                    style={{\r\n                                        margin: '5px 0',\r\n                                        fontWeight: 'bold',\r\n                                        fontSize: '0.8em',\r\n                                    }}\r\n                                >\r\n                                    Author: {blog.authorName || 'Unknown'}\r\n                                </p>\r\n                                <p>{blog.content}</p>\r\n                                <p\r\n                                    className=\"blog-date\"\r\n                                    style={{ fontSize: '0.8em', color: '#555', marginTop: '10px' }}\r\n                                >\r\n                                    Posted on: {blog.date ? new Date(blog.date.seconds ? blog.date.seconds * 1000 : blog.date).toLocaleString() : ''}\r\n                                </p>\r\n                                {currentUserId === blog.authorId && (\r\n                                    <button\r\n                                        onClick={(e) => {\r\n                                            e.stopPropagation();\r\n                                            handleDelete(blog.id, blog.path);\r\n                                        }}\r\n                                        style={{\r\n                                            marginTop: '10px',\r\n                                            padding: '5px 10px',\r\n                                            backgroundColor: '#ff4d4d',\r\n                                            color: 'white',\r\n                                            border: 'none',\r\n                                            borderRadius: '5px',\r\n                                            cursor: 'pointer',\r\n                                        }}\r\n                                    >\r\n                                        Delete\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ))\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BlogList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}